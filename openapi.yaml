openapi: 3.0.3
info:
  title: Sobranie.mk API
  description: |
    North Macedonian Parliament (Sobranie) public API. All standard endpoints use a single
    RPC-style POST endpoint. The `methodName` in the request body determines the operation.
    Date format: `/Date(timestamp)/` (milliseconds since Unix epoch).
    LanguageId: 1 = Macedonian, 2 = Albanian, 3 = Turkish.
  version: 1.0.0
  contact:
    url: https://www.sobranie.mk

servers:
  - url: https://www.sobranie.mk
    description: Production

paths:
  /Moldova/services/CalendarService.asmx/GetCustomEventsCalendar:
    post:
      summary: Get custom events calendar (non-standard)
      description: Different URL and request format. Returns events in `d` property.
      operationId: getCustomEventsCalendar
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [model]
              properties:
                model:
                  type: object
                  required: [Language, Month, Year]
                  properties:
                    Language: { type: integer, description: "1=Macedonian, 2=Albanian, 3=Turkish" }
                    Month: { type: integer, minimum: 1, maximum: 12 }
                    Year: { type: integer }
      responses:
        '200':
          description: Events in d array
          content:
            application/json:
              schema:
                type: object
                required: [d]
                properties:
                  d:
                    type: array
                    items:
                      type: object
                      properties:
                        __type: { type: string }
                        Id: { type: string, format: uuid }
                        EventDescription: { type: string }
                        EventLink: { type: string }
                        EventLocation: { type: string }
                        EventDate: { $ref: '#/components/schemas/AspDate' }
                        EventType: { type: integer }

  /Infrastructure/LoadLanguage:
    post:
      summary: Load language (non-standard)
      description: Sets/loads language preferences. No methodName.
      operationId: loadLanguage
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Localization strings
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code: { type: string }
                  Items: { type: array, items: { type: object, properties: { Key: {}, Value: {} } } }

  /Routing/MakePostRequest:
    post:
      summary: RPC-style POST request
      description: |
        Single endpoint for all API operations. The request body must include `methodName` (or `MethodName`
        for some endpoints) identifying the operation. Response structure varies by method.
      operationId: makePostRequest
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RpcRequest'
            examples:
              GetAllGenders:
                summary: Get gender catalog
                value:
                  methodName: GetAllGenders
                  languageId: 1
              GetAllSittings:
                summary: List sittings with pagination
                value:
                  methodName: GetAllSittings
                  Page: 1
                  Rows: 10
                  LanguageId: 1
                  TypeId: null
                  CommitteeId: null
                  StatusId: null
                  DateFrom: null
                  DateTo: null
                  SessionId: null
                  Number: null
                  StructureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
              GetSittingDetails:
                summary: Get sitting details (SittingId substituted by verifier)
                value:
                  MethodName: GetSittingDetails
                  SittingId: "00000000-0000-0000-0000-000000000000"
                  LanguageId: 1
              GetAllStructuresForFilter:
                summary: Get parliamentary structures/terms
                value:
                  methodName: GetAllStructuresForFilter
                  languageId: 1
              GetAllCommitteesForFilter:
                summary: Get committees for filter
                value:
                  methodName: GetAllCommitteesForFilter
                  languageId: 1
                  structureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
              GetAllMaterialStatusesForFilter:
                summary: Get material status catalog
                value:
                  methodName: GetAllMaterialStatusesForFilter
                  languageId: 1
              GetAllMaterialTypesForFilter:
                summary: Get material types catalog
                value:
                  methodName: GetAllMaterialTypesForFilter
                  languageId: 1
              GetAllMaterialsForPublicPortal:
                summary: List materials with filters
                value:
                  MethodName: GetAllMaterialsForPublicPortal
                  LanguageId: 1
                  ItemsPerPage: 15
                  CurrentPage: 1
                  SearchText: ""
                  AuthorText: ""
                  ActNumber: ""
                  StatusGroupId: null
                  MaterialTypeId: null
                  ResponsibleCommitteeId: null
                  CoReportingCommittees: null
                  OpinionCommittees: null
                  RegistrationNumber: null
                  EUCompatible: null
                  DateFrom: null
                  DateTo: null
                  ProcedureTypeId: null
                  InitiatorTypeId: null
                  StructureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
              GetMaterialDetails:
                summary: Get material details (MaterialId from listing)
                value:
                  methodName: GetMaterialDetails
                  MaterialId: "1b2114f3-72ff-43b5-887e-17316e501592"
                  LanguageId: 1
                  AmendmentsPage: 1
                  AmendmentsRows: 5
              GetMonthlyAgenda:
                summary: Monthly agenda
                value:
                  methodName: GetMonthlyAgenda
                  LanguageId: 1
                  Month: 1
                  Year: 2026
              GetAllSittingStatuses:
                summary: Get sitting status catalog
                value:
                  methodName: GetAllSittingStatuses
                  LanguageId: 1
              GetAllPoliticalParties:
                summary: Get political parties
                value:
                  methodName: GetAllPoliticalParties
                  languageId: 1
                  StructureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
              GetAllProcedureTypes:
                summary: Get procedure types
                value:
                  methodName: GetAllProcedureTypes
                  languageId: 1
              GetParliamentMPsNoImage:
                summary: List MPs with pagination
                value:
                  methodName: GetParliamentMPsNoImage
                  languageId: 1
                  genderId: null
                  ageFrom: null
                  ageTo: null
                  politicalPartyId: null
                  searchText: null
                  page: 1
                  rows: 12
                  StructureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
                  coalition: ""
                  constituency: ""
              GetProposerTypes:
                summary: Get proposer types
                value:
                  methodName: GetProposerTypes
                  languageId: 1
              GetAllQuestionStatuses:
                summary: Get question status catalog
                value:
                  methodName: GetAllQuestionStatuses
                  languageId: 1
              GetAllInstitutionsForFilter:
                summary: Get institutions for filter
                value:
                  methodName: GetAllInstitutionsForFilter
                  languageId: 1
              GetAllQuestions:
                summary: List parliamentary questions
                value:
                  methodName: GetAllQuestions
                  LanguageId: 1
                  CurrentPage: 1
                  Page: 1
                  Rows: 10
                  SearchText: ""
                  RegistrationNumber: ""
                  StatusId: null
                  From: ""
                  To: ""
                  CommitteeId: null
                  DateFrom: null
                  DateTo: null
                  StructureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
              GetQuestionDetails:
                summary: Get question details (QuestionId substituted by verifier)
                value:
                  methodName: GetQuestionDetails
                  QuestionId: "00000000-0000-0000-0000-000000000000"
                  LanguageId: 1
              GetAllApplicationTypes:
                summary: Get application types
                value:
                  methodName: GetAllApplicationTypes
                  languageId: 1
              GetAllCouncils:
                summary: Get councils
                value:
                  methodName: GetAllCouncils
                  languageId: 1
                  StructureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
              GetCouncilDetails:
                summary: Get council details (committeeId substituted by verifier)
                value:
                  methodName: GetCouncilDetails
                  committeeId: "00000000-0000-0000-0000-000000000000"
                  languageId: 1
              GetAllParliamentaryGroups:
                summary: Get parliamentary groups
                value:
                  methodName: GetAllParliamentaryGroups
                  languageId: 1
                  StructureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
              GetParliamentaryGroupDetails:
                summary: Get parliamentary group details
                value:
                  methodName: GetParliamentaryGroupDetails
                  parliamentaryGroupId: "6f83cbd1-af39-44e5-bfd0-0cde68932844"
                  LanguageId: 1
              GetPoliticalPartyDetails:
                summary: Get political party details
                value:
                  methodName: GetPoliticalPartyDetails
                  politicalPartyId: "e693cd9f-5893-49ab-9ede-0abd6e820664"
                  LanguageId: 1
              GetCommitteeDetails:
                summary: Get committee details
                value:
                  methodName: GetCommitteeDetails
                  committeeId: "bb8e23a1-c959-4818-8e6e-ebe450847fd8"
                  languageId: 1
              GetAllMPsClubsByStructure:
                summary: Get MPs clubs
                value:
                  MethodName: GetAllMPsClubsByStructure
                  LanguageId: 1
                  StructureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
              GetMPsClubDetails:
                summary: Get MPs club details
                value:
                  methodName: GetMPsClubDetails
                  mpsClubId: "22ded665-2466-4d7e-a04b-03f8a150fc8c"
                  LanguageId: 1
              GetVotingResultsForSitting:
                summary: Get voting results for sitting
                value:
                  methodName: GetVotingResultsForSitting
                  votingDefinitionId: "076a2ea4-5477-467f-8217-4c3b8b6b5e92"
                  sittingId: "f06b995b-c5c7-42cd-8605-ec2d9ab7aac1"
                  languageId: 1
              GetVotingResultsForAgendaItem:
                summary: Get voting results for agenda item
                value:
                  methodName: GetVotingResultsForAgendaItem
                  VotingDefinitionId: "9d80de02-11fb-4f79-80ee-181c0f92629d"
                  AgendaItemId: "98BBFA75-F432-4BBB-9A10-202EFE7E2569"
                  LanguageId: 1
              GetAmendmentDetails:
                summary: Get amendment details
                value:
                  methodName: GetAmendmentDetails
                  amendmentId: "9a130205-3d0a-4394-a0b1-a0ac4b15a047"
                  languageId: 1
              GetUserDetailsByStructure:
                summary: Get user details by structure
                value:
                  methodName: GetUserDetailsByStructure
                  userId: "85048fa9-e61b-4eb1-be26-8d537cb1d7c4"
                  structureId: "5e00dbd6-ca3c-4d97-b748-f792b2fa3473"
                  languageId: 1
      responses:
        '200':
          description: Success. Response structure depends on methodName.
          content:
            application/json:
              schema:
                oneOf:
                  - type: array
                    items: {}
                  - type: object
        '500':
          description: Server error (may occur for some invalid IDs)

components:
  schemas:
    RpcRequest:
      type: object
      description: Base request - all operations extend this with method-specific fields. Use methodName or MethodName depending on endpoint.
      properties:
        methodName: { type: string }
        MethodName: { type: string }
      additionalProperties: true

    AspDate:
      type: string
      pattern: '^/Date\(\d+\)/$'
      description: Microsoft JSON date format (milliseconds since epoch)

    IdTitle:
      type: object
      required: [Id, Title]
      properties:
        Id: {}
        Title: { type: string }

    GetAllGendersResponse:
      type: array
      items:
        type: object
        required: [Id, Title]
        properties:
          Id: { type: integer, description: "1=Male, 2=Female" }
          Title: { type: string }

    GetAllSittingsResponse:
      type: object
      required: [TotalItems, Items]
      properties:
        TotalItems: { type: integer }
        Items:
          type: array
          items:
            type: object
            required: [Id, Number, SittingDate, TypeId, TypeTitle, StatusId, StatusTitle, Location, CommitteeTitle, SittingDescriptionTypeTitle, Continuations, Structure, TotalRows]
            properties:
              Id: { type: string, format: uuid }
              Number: { type: integer }
              SittingDate: { $ref: '#/components/schemas/AspDate' }
              TypeId: { type: integer }
              TypeTitle: { type: string }
              StatusId: { type: integer }
              StatusTitle: { type: string }
              Location: { type: string }
              CommitteeTitle: { type: string, nullable: true }
              SittingDescriptionTypeTitle: { type: string, nullable: true }
              Continuations: { type: array, items: {} }
              Structure: {}
              TotalRows: { type: integer }

    GetSittingDetailsResponse:
      type: object
      required: [StatusId, StatusTitle, Location, Number, SittingDate, TypeTitle, TypeId, CommitteeId, CommitteeTitle, MediaLinks, Documents, Agenda, Continuations, SittingDuration, Absents, Attendances, DescriptionTypeTitle, DescriptionTypeId, Votings, Structure]
      properties:
        StatusId: { type: integer }
        StatusTitle: { type: string }
        Location: { type: string }
        Number: { type: integer }
        SittingDate: { $ref: '#/components/schemas/AspDate' }
        TypeTitle: { type: string }
        TypeId: { type: integer }
        CommitteeId: { type: string, nullable: true }
        CommitteeTitle: { type: string, nullable: true }
        MediaLinks: { type: array, items: {} }
        Documents: { type: array, items: {} }
        Agenda: { type: object }
        Continuations: { type: array, items: {} }
        SittingDuration: {}
        Absents: { type: array, items: {} }
        Attendances: { type: array, items: {} }
        DescriptionTypeTitle: { type: string, nullable: true }
        DescriptionTypeId: {}
        Votings: { type: array, items: {} }
        Structure: { type: string, nullable: true }

    GetAllStructuresForFilterResponse:
      type: array
      items:
        type: object
        required: [Id, DateFrom, DateTo, IsCurrent]
        properties:
          Id: { type: string, format: uuid }
          DateFrom: { $ref: '#/components/schemas/AspDate' }
          DateTo: { $ref: '#/components/schemas/AspDate' }
          IsCurrent: { type: boolean }

    GetAllCommitteesForFilterResponse:
      type: array
      items:
        type: object
        required: [Id, Name]
        properties:
          Id: { type: string, format: uuid }
          Name: { type: string }

    GetAllMaterialStatusesForFilterResponse:
      type: array
      items:
        type: object
        required: [Id, Title]
        properties:
          Id: { type: integer }
          Title: { type: string }

    GetAllMaterialTypesForFilterResponse:
      type: array
      items:
        type: object
        required: [Id, Title]
        properties:
          Id: { type: integer }
          Title: { type: string }

    GetAllMaterialsForPublicPortalResponse:
      type: object
      required: [TotalItems, Items]
      properties:
        TotalItems: { type: integer }
        Items:
          type: array
          items:
            type: object
            properties:
              Id: { type: string, format: uuid }
              Title: { type: string }
              TypeTitle: { type: string }
              Status: { type: string, nullable: true }
              StatusGroupTitle: { type: string }
              RegistrationNumber: { type: string }
              RegistrationDate: { $ref: '#/components/schemas/AspDate' }
              ResponsibleAuthor: { type: string, nullable: true }
              Authors: { type: array, items: {} }
              ProposerTypeTitle: { type: string }
              ResponsibleCommittee: { type: string }
              EUCompatible: { type: boolean }
              TotalItems: { type: integer, nullable: true }

    GetMaterialDetailsResponse:
      type: object
      properties:
        Title: { type: string }
        StatusGroupTitle: { type: string }
        TypeTitle: { type: string }
        ProposerTypeTitle: { type: string }
        ResponsibleAuthor: { type: string, nullable: true }
        Institution: { type: string }
        ProposerCommittee: {}
        ProcedureTypeTitle: { type: string }
        RegistrationNumber: { type: string }
        RegistrationDate: { $ref: '#/components/schemas/AspDate' }
        EUCompatible: { type: boolean }
        Committees: { type: array, items: {} }
        Documents: { type: array, items: {} }
        Authors: { type: array, items: {} }

    GetMonthlyAgendaResponse:
      type: array
      items:
        type: object
        required: [Id, Title, Location, Start, Type]
        properties:
          Id: { type: string, format: uuid }
          Title: { type: string }
          Location: { type: string }
          Start: { $ref: '#/components/schemas/AspDate' }
          Type: { type: integer }

    GetAllSittingStatusesResponse:
      type: array
      items:
        type: object
        required: [Id, Title]
        properties:
          Id: { type: integer }
          Title: { type: string }

    GetAllPoliticalPartiesResponse:
      type: array
      items:
        type: object
        required: [Id, Name, NumberOfDeputies, Image]
        properties:
          Id: { type: string, format: uuid }
          Name: { type: string }
          NumberOfDeputies: { type: integer }
          Image: { type: string }

    GetAllProcedureTypesResponse:
      type: array
      items:
        type: object
        required: [Id, Title]
        properties:
          Id: { type: integer }
          Title: { type: string }

    GetParliamentMPsNoImageResponse:
      type: object
      required: [MembersOfParliament, ExpiredMandateMembers, TotalItems, TotalItemsExpiredMandate, Statistics]
      properties:
        MembersOfParliament:
          type: array
          items:
            type: object
            required: [UserId, UserImg, FullName, RoleId, PoliticalPartyTitle, PoliticalPartyId]
            properties:
              UserId: { type: string, format: uuid }
              UserImg: { type: string }
              FullName: { type: string }
              RoleId: { type: integer }
              PoliticalPartyTitle: { type: string }
              PoliticalPartyId: { type: string }
        ExpiredMandateMembers: { type: array, items: {} }
        TotalItems: { type: integer }
        TotalItemsExpiredMandate: { type: integer }
        Statistics:
          type: object
          properties:
            TotalNumberOfMaterials: { type: integer }
            NumberOfQuestions: { type: integer }
            TotalNumberOfMPs: { type: integer }

    GetProposerTypesResponse:
      type: array
      items:
        type: object
        required: [Id, Title, Order]
        properties:
          Id: { type: integer }
          Title: { type: string }
          Order: { type: integer }

    GetAllQuestionStatusesResponse:
      type: array
      items:
        type: object
        required: [Id, Title]
        properties:
          Id: { type: integer }
          Title: { type: string }

    GetAllInstitutionsForFilterResponse:
      type: array
      items:
        type: object
        required: [Id, Title]
        properties:
          Id: { type: string, format: uuid }
          Title: { type: string }

    GetAllQuestionsResponse:
      type: object
      required: [TotalItems, Items]
      properties:
        TotalItems: { type: integer }
        Items:
          type: array
          items:
            type: object
            required: [Id, Title, From, To, ToInstitution, StatusTitle, DateAsked, QuestionTypeTitle, TotalRows]
            properties:
              Id: { type: string, format: uuid }
              Title: { type: string }
              From: { type: string }
              To: { type: string }
              ToInstitution: { type: string }
              StatusTitle: { type: string }
              DateAsked: { $ref: '#/components/schemas/AspDate' }
              QuestionTypeTitle: { type: string }
              TotalRows: { type: integer }

    GetQuestionDetailsResponse:
      type: object
      properties:
        Title: { type: string }
        From: { type: string }
        To: { type: string }
        ToInstitution: { type: string }
        QuestionTypeTitle: { type: string }
        StatusTitle: { type: string }
        Documents: { type: array, items: {} }

    GetAllApplicationTypesResponse:
      type: array
      items:
        type: object
        required: [Id, ApplicationTitle]
        properties:
          Id: { type: integer }
          ApplicationTitle: { type: string }

    GetAllCouncilsResponse:
      type: array
      items:
        type: object
        required: [Id, Name, TypeId, TypeTitle]
        properties:
          Id: { type: string, format: uuid }
          Name: { type: string }
          TypeId: { type: integer }
          TypeTitle: { type: string }

    GetCouncilDetailsResponse:
      type: object
      properties:
        Name: { type: string }
        CompositionMembers: { type: array, items: {} }
        Materials: { type: array, items: {} }
        Meetings: { type: array, items: {} }

    GetAllParliamentaryGroupsResponse:
      type: array
      items:
        type: object
        required: [Id, Name, NumberOfDeputies, Image]
        properties:
          Id: { type: string, format: uuid }
          Name: { type: string }
          NumberOfDeputies: { type: integer }
          Image: { type: string }

    GetParliamentaryGroupDetailsResponse:
      type: object
      properties:
        Name: { type: string }
        Materials: { type: array, items: {} }
        Members: { type: array, items: {} }

    GetPoliticalPartyDetailsResponse:
      type: object
      properties:
        Name: { type: string }
        Description: { type: string }
        NumberOfDeputies: { type: integer }
        Materials: { type: array, items: {} }

    GetCommitteeDetailsResponse:
      type: object
      properties:
        Name: { type: string }
        CompositionMembers: { type: array, items: {} }
        Materials: { type: array, items: {} }
        Meetings: { type: array, items: {} }
        Description: { type: string }
        Email: { type: string, nullable: true }
        PhoneNumber: { type: string, nullable: true }
        StructureId: { type: string }

    GetAllMPsClubsByStructureResponse:
      type: array
      items:
        type: object
        required: [Id, Name]
        properties:
          Id: { type: string, format: uuid }
          Name: { type: string }

    GetMPsClubDetailsResponse:
      type: object
      properties:
        Name: { type: string }
        Members: { type: array, items: {} }

    GetVotingResultsForSittingResponse:
      type: object
      properties:
        votingOptions: { type: array, items: {} }
        sittingItem: { type: object }
        summaryResult: { type: object }
        votingResultsByUser: { type: array, items: {} }
